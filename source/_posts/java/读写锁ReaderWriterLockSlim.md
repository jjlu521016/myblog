---
title: 读写锁ReaderWriterLockSlim
toc: true
date: 2018-03-29 12:21:22
tags:
- java
- 多线程
---

关于读写锁的定义可以到网上查询，这里不再啰嗦了。
### 1. 场景：
多个线程同时读写，读线程的数量远远大于写线程，该怎么办？

如果我们只是简单的使用lock方式去加锁，则会影响性能。如果采用读写锁，那么多个线程可以同时读取该对象，只有等到对象被写入锁占用的时候，才会阻塞。
也就是说某个线程进入了写入模式，那么其他线程无论是要写入还是读取，都是会被阻塞的。

+ 进入写入/读取模式有2种方法：
　　EnterReadLock尝试进入写入模式锁定状态。
　　TryEnterReadLock(Int32) 尝试进入读取模式锁定状态，可以选择整数超时时间。
　　EnterWriteLock 尝试进入写入模式锁定状态。
　　TryEnterWriteLock(Int32) 尝试进入写入模式锁定状态，可以选择超时时间。
+ 退出写入/读取模式有2种方法：
　　ExitReadLock 减少读取模式的递归计数，并在生成的计数为 0（零）时退出读取模式。
　　ExitWriteLock 减少写入模式的递归计数，并在生成的计数为 0（零）时退出写入模式。

### 待续.......